import{r as l,j as e}from"./index-_T_dclBo.js";import{C as a,a as r,b as i,c as d}from"./card-mM-adsMl.js";import{b as o}from"./ownerService-CJxlrD2e.js";import{T as A,a as E,b as h,c as j}from"./tabs-BnWsuEag.js";import{R as u,B as K,E as p,X as f,Y as g,F as v,J as _,H as N,I as B,K as F,M as H,N as I}from"./reports.service-DfSIJ2MT.js";import{T as x}from"./trending-up-DWFjtjM_.js";import{D as m,C as G}from"./Dashboard-vSO5UD5A.js";import{C as y}from"./credit-card-mDrDSJyn.js";import{c as w}from"./createLucideIcon-vxqge8nX.js";import"./index-BHur5ELe.js";const W=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Y=w("trending-down",W);const V=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],X=w("wallet",V),$={"Credit Card":y,Cash:m,"Digital Wallet":X};function re(){const[n,b]=l.useState({totalRevenue:0,netProfit:0,avgTicket:0,outstanding:0,pendingPayments:0}),[S,C]=l.useState([]),[R,T]=l.useState([]),[k,P]=l.useState([]),[M,D]=l.useState([]),[L,O]=l.useState([]);return l.useEffect(()=>{(async()=>{try{const s=await H.getSummary();s?.summary&&b(s.summary),C(s?.monthlyRevenue??[]),T(s?.dailyRevenue??[]),O(s?.topStaff??[]),D((s?.paymentMethods??[]).map(c=>({...c,icon:$[c.method]||m})))}catch(s){console.error("Failed to load revenue summary",s)}try{const s=await I.getTopServices("monthly");P(s??[])}catch(s){console.error("Failed to load revenue services",s)}})()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-foreground",children:"Revenue Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your salon's financial performance"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{className:"border-l-4 border-l-green-500 hover:shadow-lg transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Revenue"}),e.jsxs("div",{className:"text-2xl text-foreground mb-1",children:["â‚¹",n.totalRevenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-1.5 py-0.5 rounded-full",children:[e.jsx(x,{className:"w-3 h-3"}),e.jsx("span",{children:"+21.2%"})]}),e.jsx("span",{className:"text-muted-foreground",children:"vs last month"})]})]}),e.jsx("div",{className:"shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"w-5 h-5 text-green-600"})})]})})}),e.jsx(a,{className:"border-l-4 border-l-blue-500 hover:shadow-lg transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Net Profit"}),e.jsxs("div",{className:"text-2xl text-foreground mb-1",children:["â‚¹",n.netProfit.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-1.5 py-0.5 rounded-full",children:[e.jsx(x,{className:"w-3 h-3"}),e.jsx("span",{children:"+18.5%"})]}),e.jsx("span",{className:"text-muted-foreground",children:"vs last month"})]})]}),e.jsx("div",{className:"shrink-0 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-blue-600"})})]})})}),e.jsx(a,{className:"border-l-4 border-l-purple-500 hover:shadow-lg transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Avg. Ticket Size"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1",children:[e.jsxs("span",{className:"text-2xl text-foreground",children:["â‚¹",n.avgTicket.toLocaleString()]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"per appointment"})]})]}),e.jsx("div",{className:"shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-purple-600"})})]})})}),e.jsx(a,{className:"border-l-4 border-l-red-500 hover:shadow-lg transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Outstanding"}),e.jsxs("div",{className:"text-2xl text-foreground mb-1",children:["â‚¹",n.outstanding.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-red-50 text-red-700 px-1.5 py-0.5 rounded-full",children:[e.jsx(Y,{className:"w-3 h-3"}),e.jsxs("span",{children:[n.pendingPayments," pending"]})]}),e.jsx("span",{className:"text-muted-foreground",children:"payments"})]})]}),e.jsx("div",{className:"shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-red-600"})})]})})})]}),e.jsxs(A,{defaultValue:"monthly",className:"space-y-4",children:[e.jsxs(E,{children:[e.jsx(h,{value:"monthly",children:"Monthly"}),e.jsx(h,{value:"daily",children:"Daily"})]}),e.jsx(j,{value:"monthly",className:"space-y-4",children:e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(d,{children:"Revenue vs Profit Trend"})}),e.jsx(r,{children:e.jsx(u,{width:"100%",height:350,children:e.jsxs(K,{data:S,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#d4af37",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#d4af37",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorProfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ffd700",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ffd700",stopOpacity:0})]})]}),e.jsx(p,{strokeDasharray:"3 3",stroke:"#333"}),e.jsx(f,{dataKey:"month"}),e.jsx(g,{}),e.jsx(v,{}),e.jsx(_,{}),e.jsx(N,{type:"monotone",dataKey:"revenue",stroke:"#d4af37",fillOpacity:1,fill:"url(#colorRevenue)"}),e.jsx(N,{type:"monotone",dataKey:"profit",stroke:"#ffd700",fillOpacity:1,fill:"url(#colorProfit)"})]})})})]})}),e.jsx(j,{value:"daily",className:"space-y-4",children:e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(d,{children:"Daily Revenue (This Week)"})}),e.jsx(r,{children:e.jsx(u,{width:"100%",height:350,children:e.jsxs(B,{data:R,children:[e.jsx(p,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(f,{dataKey:"day"}),e.jsx(g,{}),e.jsx(v,{}),e.jsx(F,{dataKey:"revenue",fill:"#8B5CF6",radius:[8,8,0,0]})]})})})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(d,{children:"Revenue by Service"})}),e.jsx(r,{className:"space-y-4",children:k.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-foreground",children:t.service}),e.jsxs("span",{className:"text-foreground",children:["â‚¹",t.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-400 h-2 rounded-full shadow-lg shadow-yellow-600/30",style:{width:`${t.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-muted-foreground w-12 text-right",children:[t.percentage,"%"]})]})]},t.service))})]}),e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(d,{children:"Payment Methods"})}),e.jsx(r,{className:"space-y-4",children:M.map(t=>{const s=t.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-600/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground",children:t.method}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.percentage,"% of total"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-foreground",children:["â‚¹",t.amount.toLocaleString()]})})]},t.method)})})]})]}),e.jsxs(a,{children:[e.jsx(i,{children:e.jsx(d,{children:"Top Performing Staff"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:L.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s===0&&e.jsx(o,{className:"bg-yellow-500",children:"ðŸ† #1"}),s===1&&e.jsx(o,{className:"bg-gray-400",children:"ðŸ¥ˆ #2"}),s===2&&e.jsx(o,{className:"bg-orange-600",children:"ðŸ¥‰ #3"}),s>2&&e.jsxs(o,{variant:"outline",children:["#",s+1]})]}),e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-rose-300 to-purple-300 rounded-full flex items-center justify-center text-purple-700 shadow-lg shadow-rose-300/30",children:t.name.split(" ").map(c=>c[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.appointments," appointments"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg text-foreground",children:["â‚¹",t.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Avg: â‚¹",t.avgTicket]})]})]},t.name))})})]})]})}export{re as default};
