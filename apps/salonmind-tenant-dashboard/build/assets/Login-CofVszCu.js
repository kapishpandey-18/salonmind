import{r as e,j as s,u as Ie,t as M}from"./index-DEsDXUSK.js";import{c as be,a as ee,S as Ae,B as fe}from"./SalonMindLogo-BdYlaItP.js";import{I as We}from"./input-fORRFi0u.js";import{L as ge}from"./label-CZBKjXX6.js";import{C as Be,a as Le,b as _e,c as Fe,d as He}from"./card-CSfxeEk0.js";import{A as $e}from"./arrow-left-BEKlL5HK.js";var ze=Object.defineProperty,Ge=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,ve=(n,a,l)=>a in n?ze(n,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[a]=l,qe=(n,a)=>{for(var l in a||(a={}))ye.call(a,l)&&ve(n,l,a[l]);if(te)for(var l of te(a))we.call(a,l)&&ve(n,l,a[l]);return n},Ze=(n,a)=>Ge(n,Ve(a)),Je=(n,a)=>{var l={};for(var u in n)ye.call(n,u)&&a.indexOf(u)<0&&(l[u]=n[u]);if(n!=null&&te)for(var u of te(n))a.indexOf(u)<0&&we.call(n,u)&&(l[u]=n[u]);return l};function Ke(n){let a=setTimeout(n,0),l=setTimeout(n,10),u=setTimeout(n,50);return[a,l,u]}function Qe(n){let a=e.useRef();return e.useEffect(()=>{a.current=n}),a.current}var Ue=18,Pe=40,Xe=`${Pe}px`,Ye=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function et({containerRef:n,inputRef:a,pushPasswordManagerStrategy:l,isFocused:u}){let[x,o]=e.useState(!1),[R,j]=e.useState(!1),[T,S]=e.useState(!1),b=e.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&x&&R,[x,R,l]),C=e.useCallback(()=>{let h=n.current,k=a.current;if(!h||!k||T||l==="none")return;let g=h,E=g.getBoundingClientRect().left+g.offsetWidth,I=g.getBoundingClientRect().top+g.offsetHeight/2,i=E-Ue,B=I;document.querySelectorAll(Ye).length===0&&document.elementFromPoint(i,B)===h||(o(!0),S(!0))},[n,a,T,l]);return e.useEffect(()=>{let h=n.current;if(!h||l==="none")return;function k(){let E=window.innerWidth-h.getBoundingClientRect().right;j(E>=Pe)}k();let g=setInterval(k,1e3);return()=>{clearInterval(g)}},[n,l]),e.useEffect(()=>{let h=u||document.activeElement===a.current;if(l==="none"||!h)return;let k=setTimeout(C,0),g=setTimeout(C,2e3),E=setTimeout(C,5e3),I=setTimeout(()=>{S(!0)},6e3);return()=>{clearTimeout(k),clearTimeout(g),clearTimeout(E),clearTimeout(I)}},[a,u,l,C]),{hasPWMBadge:x,willPushPWMBadge:b,PWM_BADGE_SPACE_WIDTH:Xe}}var je=e.createContext({}),Se=e.forwardRef((n,a)=>{var l=n,{value:u,onChange:x,maxLength:o,textAlign:R="left",pattern:j,placeholder:T,inputMode:S="numeric",onComplete:b,pushPasswordManagerStrategy:C="increase-width",pasteTransformer:h,containerClassName:k,noScriptCSSFallback:g=tt,render:E,children:I}=l,i=Je(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),B,U,m,y,L;let[Ce,Ee]=e.useState(typeof i.defaultValue=="string"?i.defaultValue:""),d=u??Ce,_=Qe(d),q=e.useCallback(t=>{x?.(t),Ee(t)},[x]),O=e.useMemo(()=>j?typeof j=="string"?new RegExp(j):j:null,[j]),p=e.useRef(null),ne=e.useRef(null),ae=e.useRef({value:d,onChange:q,isIOS:typeof window<"u"&&((U=(B=window?.CSS)==null?void 0:B.supports)==null?void 0:U.call(B,"-webkit-touch-callout","none"))}),X=e.useRef({prev:[(m=p.current)==null?void 0:m.selectionStart,(y=p.current)==null?void 0:y.selectionEnd,(L=p.current)==null?void 0:L.selectionDirection]});e.useImperativeHandle(a,()=>p.current,[]),e.useEffect(()=>{let t=p.current,r=ne.current;if(!t||!r)return;ae.current.value!==t.value&&ae.current.onChange(t.value),X.current.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection];function f(){if(document.activeElement!==t){J(null),K(null);return}let c=t.selectionStart,v=t.selectionEnd,Y=t.selectionDirection,N=t.maxLength,H=t.value,D=X.current.prev,A=-1,W=-1,$;if(H.length!==0&&c!==null&&v!==null){let Me=c===v,Re=c===H.length&&H.length<N;if(Me&&!Re){let z=c;if(z===0)A=0,W=1,$="forward";else if(z===N)A=z-1,W=z,$="backward";else if(N>1&&H.length>1){let se=0;if(D[0]!==null&&D[1]!==null){$=z<D[1]?"backward":"forward";let De=D[0]===D[1]&&D[0]<N;$==="backward"&&!De&&(se=-1)}A=se+z,W=se+z+1}}A!==-1&&W!==-1&&A!==W&&p.current.setSelectionRange(A,W,$)}let me=A!==-1?A:c,he=W!==-1?W:v,Oe=$??Y;J(me),K(he),X.current.prev=[me,he,Oe]}if(document.addEventListener("selectionchange",f,{capture:!0}),f(),document.activeElement===t&&re(!0),!document.getElementById("input-otp-style")){let c=document.createElement("style");if(c.id="input-otp-style",document.head.appendChild(c),c.sheet){let v="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Q(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Q(c.sheet,`[data-input-otp]:autofill { ${v} }`),Q(c.sheet,`[data-input-otp]:-webkit-autofill { ${v} }`),Q(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Q(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let w=()=>{r&&r.style.setProperty("--root-height",`${t.clientHeight}px`)};w();let P=new ResizeObserver(w);return P.observe(t),()=>{document.removeEventListener("selectionchange",f,{capture:!0}),P.disconnect()}},[]);let[oe,ie]=e.useState(!1),[Z,re]=e.useState(!1),[F,J]=e.useState(null),[G,K]=e.useState(null);e.useEffect(()=>{Ke(()=>{var t,r,f,w;(t=p.current)==null||t.dispatchEvent(new Event("input"));let P=(r=p.current)==null?void 0:r.selectionStart,c=(f=p.current)==null?void 0:f.selectionEnd,v=(w=p.current)==null?void 0:w.selectionDirection;P!==null&&c!==null&&(J(P),K(c),X.current.prev=[P,c,v])})},[d,Z]),e.useEffect(()=>{_!==void 0&&d!==_&&_.length<o&&d.length===o&&b?.(d)},[o,b,_,d]);let V=et({containerRef:ne,inputRef:p,pushPasswordManagerStrategy:C,isFocused:Z}),ce=e.useCallback(t=>{let r=t.currentTarget.value.slice(0,o);if(r.length>0&&O&&!O.test(r)){t.preventDefault();return}typeof _=="string"&&r.length<_.length&&document.dispatchEvent(new Event("selectionchange")),q(r)},[o,q,_,O]),ue=e.useCallback(()=>{var t;if(p.current){let r=Math.min(p.current.value.length,o-1),f=p.current.value.length;(t=p.current)==null||t.setSelectionRange(r,f),J(r),K(f)}re(!0)},[o]),de=e.useCallback(t=>{var r,f;let w=p.current;if(!h&&(!ae.current.isIOS||!t.clipboardData||!w))return;let P=t.clipboardData.getData("text/plain"),c=h?h(P):P;t.preventDefault();let v=(r=p.current)==null?void 0:r.selectionStart,Y=(f=p.current)==null?void 0:f.selectionEnd,N=(v!==Y?d.slice(0,v)+c+d.slice(Y):d.slice(0,v)+c+d.slice(v)).slice(0,o);if(N.length>0&&O&&!O.test(N))return;w.value=N,q(N);let H=Math.min(N.length,o-1),D=N.length;w.setSelectionRange(H,D),J(H),K(D)},[o,q,O,d]),Ne=e.useMemo(()=>({position:"relative",cursor:i.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[i.disabled]),pe=e.useMemo(()=>({position:"absolute",inset:0,width:V.willPushPWMBadge?`calc(100% + ${V.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:V.willPushPWMBadge?`inset(0 ${V.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:R,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[V.PWM_BADGE_SPACE_WIDTH,V.willPushPWMBadge,R]),Te=e.useMemo(()=>e.createElement("input",Ze(qe({autoComplete:i.autoComplete||"one-time-code"},i),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":F,"data-input-otp-mse":G,inputMode:S,pattern:O?.source,"aria-placeholder":T,style:pe,maxLength:o,value:d,ref:p,onPaste:t=>{var r;de(t),(r=i.onPaste)==null||r.call(i,t)},onChange:ce,onMouseOver:t=>{var r;ie(!0),(r=i.onMouseOver)==null||r.call(i,t)},onMouseLeave:t=>{var r;ie(!1),(r=i.onMouseLeave)==null||r.call(i,t)},onFocus:t=>{var r;ue(),(r=i.onFocus)==null||r.call(i,t)},onBlur:t=>{var r;re(!1),(r=i.onBlur)==null||r.call(i,t)}})),[ce,ue,de,S,pe,o,G,F,i,O?.source,d]),le=e.useMemo(()=>({slots:Array.from({length:o}).map((t,r)=>{var f;let w=Z&&F!==null&&G!==null&&(F===G&&r===F||r>=F&&r<G),P=d[r]!==void 0?d[r]:null,c=d[0]!==void 0?null:(f=T?.[r])!=null?f:null;return{char:P,placeholderChar:c,isActive:w,hasFakeCaret:w&&P===null}}),isFocused:Z,isHovering:!i.disabled&&oe}),[Z,oe,o,G,F,i.disabled,d]),ke=e.useMemo(()=>E?E(le):e.createElement(je.Provider,{value:le},I),[I,le,E]);return e.createElement(e.Fragment,null,g!==null&&e.createElement("noscript",null,e.createElement("style",null,g)),e.createElement("div",{ref:ne,"data-input-otp-container":!0,style:Ne,className:k},ke,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Te)))});Se.displayName="Input";function Q(n,a){try{n.insertRule(a)}catch{console.error("input-otp could not insert CSS rule:",a)}}var tt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const nt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xe=be("loader-circle",nt);const at=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],rt=be("smartphone",at);function lt({className:n,containerClassName:a,...l}){return s.jsx(Se,{"data-slot":"input-otp",containerClassName:ee("flex items-center gap-2 has-disabled:opacity-50",a),className:ee("disabled:cursor-not-allowed",n),...l})}function st({className:n,...a}){return s.jsx("div",{"data-slot":"input-otp-group",className:ee("flex items-center gap-1",n),...a})}function ot({index:n,className:a,...l}){const u=e.useContext(je),{char:x,hasFakeCaret:o,isActive:R}=u?.slots[n]??{};return s.jsxs("div",{"data-slot":"input-otp-slot","data-active":R,className:ee("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",a),...l,children:[x,o&&s.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}const it={background:"linear-gradient(135deg, #0a1b3f 0%, #123b7c 45%, #08101f 100%)"};function ft(){const{sendOTP:n,resendOTP:a,loginWithOTP:l}=Ie(),[u,x]=e.useState("phone"),[o,R]=e.useState(""),[j,T]=e.useState(""),[S,b]=e.useState(!1),[C,h]=e.useState(null),k=m=>{const L=m.replace(/\D/g,"").slice(0,10);return L.length>5?L.slice(0,5)+" "+L.slice(5):L},g=()=>"+91"+o.replace(/\s/g,""),E=()=>/^[6-9]\d{9}$/.test(o.replace(/\s/g,""))?!0:(M.error("Please enter a valid 10-digit Indian mobile number"),!1),I=async m=>{if(m.preventDefault(),!!E()){b(!0);try{const y=await n(g());h(y.challengeId),x("otp"),M.success("OTP sent successfully!")}catch(y){M.error(y.message||"Failed to send OTP")}finally{b(!1)}}},i=async m=>{if(m.preventDefault(),j.length!==6){M.error("Please enter a valid 6-digit OTP");return}if(b(!0),!C){M.error("OTP challenge not found. Please resend the code.");return}try{await l({challengeId:C,otp:j}),M.success("Login successful!")}catch(y){M.error(y.message||"OTP verification failed")}finally{b(!1)}},B=async()=>{if(!C){M.error("No active challenge. Please restart the login flow.");return}b(!0);try{const m=await a(C);h(m.challengeId),T(""),M.success("OTP resent successfully!")}catch(m){M.error(m.message||"Failed to resend OTP")}finally{b(!1)}},U=()=>{x("phone"),T(""),h(null)};return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-10",style:it,children:s.jsxs(Be,{className:"w-full max-w-md border-slate-800 bg-slate-900/80 backdrop-blur",children:[s.jsx(Le,{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ae,{size:48}),s.jsxs("div",{children:[s.jsx(_e,{className:"text-white text-2xl",children:"SalonMind"}),s.jsx(Fe,{className:"text-slate-300",children:"Welcome back. Continue with OTP verification."})]})]})}),s.jsx(He,{children:u==="phone"?s.jsxs("form",{onSubmit:I,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"phone",className:"text-slate-200",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(We,{id:"phone",type:"tel",placeholder:"98765 43210",value:o,onChange:m=>R(k(m.target.value)),className:"pl-10 text-lg"}),s.jsx(rt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"})]}),s.jsx("p",{className:"text-xs text-slate-400",children:"We will send a 6-digit OTP to this number"})]}),s.jsx(fe,{type:"submit",className:"w-full",disabled:S,children:S?s.jsx(xe,{className:"h-4 w-4 animate-spin"}):"Send OTP"})]}):s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{type:"button",onClick:U,className:"text-sm text-slate-300 flex items-center gap-1",children:[s.jsx($e,{className:"h-4 w-4"})," Change number"]}),s.jsx("p",{className:"text-sm text-slate-400",children:o})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ge,{className:"text-slate-200",children:"Enter OTP"}),s.jsx(lt,{maxLength:6,value:j,onChange:m=>T(m),children:s.jsx(st,{children:Array.from({length:6}).map((m,y)=>s.jsx(ot,{index:y},y))})}),s.jsxs("p",{className:"text-xs text-slate-400",children:["Didn't receive the code?"," ",s.jsx("button",{type:"button",onClick:B,className:"text-primary hover:underline",disabled:S,children:"Resend OTP"})]})]}),s.jsx(fe,{type:"submit",className:"w-full",disabled:S,children:S?s.jsx(xe,{className:"h-4 w-4 animate-spin"}):"Verify & Continue"})]})})]})})}export{ft as default};
